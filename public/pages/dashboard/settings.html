<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√†i ƒë·∫∑t - H·ªçc Ti·∫øng ƒê√†i Loan</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    
    <!-- Font Awesome Kit -->
    <script src="https://kit.fontawesome.com/8b9a27d5a0.js" crossorigin="anonymous"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/pages/dashboard.css">
    
    <style>
        .settings-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .settings-header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 3rem 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 1.5rem;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .settings-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }

        .settings-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }

        .settings-header p {
            font-size: 1.125rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            margin: 0;
        }

        .settings-content {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .settings-sidebar {
            position: sticky;
            top: 100px;
            height: fit-content;
        }

        .settings-menu {
            background: white;
            border-radius: 1rem;
            padding: 1rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            background: transparent;
            width: 100%;
            text-align: left;
            color: #666;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .menu-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 0;
            background: linear-gradient(180deg, #667eea, #764ba2);
            border-radius: 0 4px 4px 0;
            transition: height 0.3s ease;
        }

        .menu-item:hover {
            background: #f8f9ff;
            color: #667eea;
        }

        .menu-item.active {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            color: #667eea;
            font-weight: 600;
        }

        .menu-item.active::before {
            height: 70%;
        }

        .menu-item i {
            width: 24px;
            text-align: center;
            font-size: 1.25rem;
        }

        .settings-panel {
            background: white;
            border-radius: 1rem;
            padding: 2.5rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            display: none;
        }

        .settings-panel.active {
            display: block;
            animation: fadeInUp 0.4s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .panel-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #1a1a1a;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .panel-title i {
            color: #667eea;
        }

        .panel-subtitle {
            color: #666;
            margin-bottom: 2rem;
            font-size: 1rem;
        }

        .setting-card {
            background: #f8f9ff;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 1.5rem;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .setting-card:hover {
            border-color: #667eea;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .card-header {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #1a1a1a;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-header i {
            color: #667eea;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.25rem 0;
            border-bottom: 1px solid #e8e8ff;
        }

        .setting-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .setting-item:first-child {
            padding-top: 0;
        }

        .setting-info {
            flex: 1;
        }

        .setting-label {
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 0.25rem;
            font-size: 1rem;
        }

        .setting-desc {
            color: #666;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        .setting-control {
            margin-left: 2rem;
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            width: 56px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #ddd;
            transition: 0.4s;
            border-radius: 30px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 24px;
            width: 24px;
            left: 3px;
            bottom: 3px;
            background: white;
            transition: 0.4s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        input:checked + .toggle-slider {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        /* Select Dropdown */
        .custom-select {
            min-width: 200px;
            padding: 0.75rem 1rem;
            border: 2px solid #e8e8ff;
            border-radius: 0.75rem;
            font-size: 1rem;
            color: #1a1a1a;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .custom-select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }

        .custom-select:hover {
            border-color: #667eea;
        }

        /* Range Slider */
        .range-slider {
            width: 200px;
        }

        .range-slider input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #e8e8ff;
            outline: none;
            -webkit-appearance: none;
        }

        .range-slider input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
        }

        .range-slider input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
            border: none;
        }

        .range-value {
            display: inline-block;
            margin-left: 1rem;
            font-weight: 600;
            color: #667eea;
            min-width: 50px;
        }

        /* Buttons */
        .btn-primary-custom {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            color: white;
            padding: 0.875rem 2rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-primary-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary-custom {
            background: white;
            border: 2px solid #e8e8ff;
            color: #667eea;
            padding: 0.875rem 2rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary-custom:hover {
            background: #f8f9ff;
            border-color: #667eea;
        }

        .btn-danger-custom {
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            border: none;
            color: white;
            padding: 0.875rem 2rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        .btn-danger-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(255, 107, 107, 0.4);
        }

        /* Danger Zone */
        .danger-zone {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.05), rgba(238, 90, 111, 0.05));
            border: 2px solid #ffebee;
            border-radius: 1rem;
            padding: 2rem;
            margin-top: 2rem;
        }

        .danger-zone .card-header {
            color: #ff6b6b;
        }

        .danger-zone .card-header i {
            color: #ff6b6b;
        }

        /* Data Export Section */
        .export-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .export-card {
            background: white;
            border: 2px solid #e8e8ff;
            border-radius: 0.75rem;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .export-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.15);
        }

        .export-card i {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 1rem;
        }

        .export-card h4 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #1a1a1a;
        }

        .export-card p {
            font-size: 0.875rem;
            color: #666;
            margin: 0;
        }

        /* Success Message */
        .success-message {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(46, 125, 50, 0.1));
            border: 2px solid #c8e6c9;
            border-radius: 0.75rem;
            padding: 1rem 1.5rem;
            margin-bottom: 1.5rem;
            display: none;
            align-items: center;
            gap: 1rem;
        }

        .success-message.show {
            display: flex;
            animation: slideInDown 0.4s ease;
        }

        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .success-message i {
            color: #4caf50;
            font-size: 1.5rem;
        }

        .success-message span {
            color: #2e7d32;
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .settings-content {
                grid-template-columns: 1fr;
            }

            .settings-sidebar {
                position: static;
            }

            .settings-menu {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 0.5rem;
            }

            .setting-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .setting-control {
                margin-left: 0;
                width: 100%;
            }

            .custom-select,
            .range-slider {
                width: 100%;
            }
        }

        @media (max-width: 768px) {
            .settings-header h1 {
                font-size: 2rem;
            }

            .settings-panel {
                padding: 1.5rem;
            }

            .panel-title {
                font-size: 1.5rem;
            }

            .setting-card {
                padding: 1.5rem;
            }

            .export-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div id="header-placeholder"></div>
    
    <div class="settings-container">
        <!-- Page Header -->
        <div class="settings-header">
            <h1>‚öôÔ∏è C√†i ƒë·∫∑t</h1>
            <p>T√πy ch·ªânh tr·∫£i nghi·ªám h·ªçc t·∫≠p c·ªßa b·∫°n</p>
        </div>

        <!-- Success Message -->
        <div class="success-message" id="successMessage">
            <i class="fas fa-check-circle"></i>
            <span>C√†i ƒë·∫∑t ƒë√£ ƒë∆∞·ª£c l∆∞u th√†nh c√¥ng!</span>
        </div>

        <div class="settings-content">
            <!-- Sidebar Menu -->
            <div class="settings-sidebar">
                <div class="settings-menu">
                    <button class="menu-item active" data-panel="general">
                        <i class="fas fa-sliders-h"></i>
                        <span>Chung</span>
                    </button>
                    <button class="menu-item" data-panel="learning">
                        <i class="fas fa-graduation-cap"></i>
                        <span>H·ªçc t·∫≠p</span>
                    </button>
                    <button class="menu-item" data-panel="notifications">
                        <i class="fas fa-bell"></i>
                        <span>Th√¥ng b√°o</span>
                    </button>
                    <button class="menu-item" data-panel="privacy">
                        <i class="fas fa-shield-alt"></i>
                        <span>B·∫£o m·∫≠t</span>
                    </button>
                    <button class="menu-item" data-panel="data">
                        <i class="fas fa-database"></i>
                        <span>D·ªØ li·ªáu</span>
                    </button>
                </div>
            </div>

            <!-- Main Content -->
            <div class="settings-main">
                <!-- General Panel -->
                <div class="settings-panel active" id="general-panel">
                    <h2 class="panel-title">
                        <i class="fas fa-sliders-h"></i>
                        C√†i ƒë·∫∑t chung
                    </h2>
                    <p class="panel-subtitle">C·∫•u h√¨nh giao di·ªán, ng√¥n ng·ªØ v√† c√°c t√πy ch·ªçn c∆° b·∫£n</p>

                    <!-- Interface & Language Card -->
                    <div class="setting-card">
                        <div class="card-header">
                            <i class="fas fa-palette"></i>
                            Giao di·ªán & Ng√¥n ng·ªØ
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Ng√¥n ng·ªØ giao di·ªán</div>
                                <div class="setting-desc">Ch·ªçn ng√¥n ng·ªØ hi·ªÉn th·ªã c·ªßa ·ª©ng d·ª•ng</div>
                            </div>
                            <div class="setting-control">
                                <select class="custom-select" id="language">
                                    <option value="vi">üáªüá≥ Ti·∫øng Vi·ªát</option>
                                    <option value="zh-tw">üáπüáº ÁπÅÈ´î‰∏≠Êñá</option>
                                    <option value="en">üá¨üáß English</option>
                                </select>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">C·ª° ch·ªØ</div>
                                <div class="setting-desc">ƒêi·ªÅu ch·ªânh k√≠ch th∆∞·ªõc ch·ªØ trong ·ª©ng d·ª•ng</div>
                            </div>
                            <div class="setting-control">
                                <select class="custom-select" id="fontSize">
                                    <option value="small">Nh·ªè</option>
                                    <option value="medium" selected>Trung b√¨nh</option>
                                    <option value="large">L·ªõn</option>
                                    <option value="xlarge">R·∫•t l·ªõn</option>
                                </select>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Ch·∫ø ƒë·ªô t·ªëi</div>
                                <div class="setting-desc">B·∫≠t ch·∫ø ƒë·ªô n·ªÅn t·ªëi ƒë·ªÉ gi·∫£m m·ªèi m·∫Øt</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="darkMode">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">T·ª± ƒë·ªông chuy·ªÉn ch·∫ø ƒë·ªô</div>
                                <div class="setting-desc">T·ª± ƒë·ªông b·∫≠t ch·∫ø ƒë·ªô t·ªëi v√†o ban ƒë√™m</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="autoTheme">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Sound & Effects Card -->
                    <div class="setting-card">
                        <div class="card-header">
                            <i class="fas fa-volume-up"></i>
                            √Çm thanh & Hi·ªáu ·ª©ng
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Hi·ªáu ·ª©ng √¢m thanh</div>
                                <div class="setting-desc">Ph√°t √¢m thanh khi ho√†n th√†nh b√†i h·ªçc, ƒë·∫°t th√†nh t√≠ch</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="soundEffects" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">√Çm l∆∞·ª£ng hi·ªáu ·ª©ng</div>
                                <div class="setting-desc">ƒêi·ªÅu ch·ªânh m·ª©c √¢m l∆∞·ª£ng c·ªßa hi·ªáu ·ª©ng √¢m thanh</div>
                            </div>
                            <div class="setting-control">
                                <select class="custom-select" id="effectsVolume">
                                    <option value="25">25%</option>
                                    <option value="50">50%</option>
                                    <option value="75" selected>75%</option>
                                    <option value="100">100%</option>
                                </select>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Hi·ªáu ·ª©ng chuy·ªÉn ƒë·ªông</div>
                                <div class="setting-desc">B·∫≠t/t·∫Øt c√°c hi·ªáu ·ª©ng animation trong giao di·ªán</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="animations" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Learning Panel -->
                <div class="settings-panel" id="learning-panel">
                    <h2 class="panel-title">
                        <i class="fas fa-graduation-cap"></i>
                        C√†i ƒë·∫∑t h·ªçc t·∫≠p
                    </h2>
                    <p class="panel-subtitle">T√πy ch·ªânh tr·∫£i nghi·ªám h·ªçc t·∫≠p theo nhu c·∫ßu c·ªßa b·∫°n</p>

                    <div class="setting-card">
                        <div class="card-header">
                            <i class="fas fa-target"></i>
                            M·ª•c ti√™u h·ªçc t·∫≠p
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">M·ª•c ti√™u h√†ng ng√†y</div>
                                <div class="setting-desc">S·ªë t·ª´ v·ª±ng b·∫°n mu·ªën h·ªçc m·ªói ng√†y</div>
                            </div>
                            <div class="setting-control">
                                <div class="range-slider">
                                    <input type="range" min="5" max="50" value="10" id="dailyGoal">
                                    <span class="range-value" id="dailyGoalValue">10 t·ª´</span>
                                </div>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Nh·∫Øc nh·ªü h·ªçc t·∫≠p</div>
                                <div class="setting-desc">Nh·∫≠n th√¥ng b√°o nh·∫Øc nh·ªü h·ªçc t·∫≠p h√†ng ng√†y</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="studyReminder" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="setting-card">
                        <div class="card-header">
                            <i class="fas fa-book-open"></i>
                            Ph∆∞∆°ng ph√°p h·ªçc
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Hi·ªÉn th·ªã Pinyin</div>
                                <div class="setting-desc">Hi·ªÉn th·ªã phi√™n √¢m Pinyin khi h·ªçc t·ª´ v·ª±ng</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="showPinyin" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Hi·ªÉn th·ªã Zhuyin</div>
                                <div class="setting-desc">Hi·ªÉn th·ªã phi√™n √¢m Zhuyin (Bopomofo) khi h·ªçc</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="showZhuyin">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Ch·∫ø ƒë·ªô √¥n t·∫≠p</div>
                                <div class="setting-desc">Ph∆∞∆°ng ph√°p √¥n t·∫≠p t·ª´ v·ª±ng ƒë√£ h·ªçc</div>
                            </div>
                            <div class="setting-control">
                                <select class="custom-select" id="reviewMode">
                                    <option value="flashcard">Flashcard</option>
                                    <option value="quiz" selected>Tr·∫Øc nghi·ªám</option>
                                    <option value="writing">Vi·∫øt ch·ªØ</option>
                                    <option value="mixed">K·∫øt h·ª£p</option>
                                </select>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Ph√°t √¢m t·ª± ƒë·ªông</div>
                                <div class="setting-desc">T·ª± ƒë·ªông ph√°t √¢m thanh khi hi·ªÉn th·ªã t·ª´ m·ªõi</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="autoPlay" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Notifications Panel -->
                <div class="settings-panel" id="notifications-panel">
                    <h2 class="panel-title">
                        <i class="fas fa-bell"></i>
                        C√†i ƒë·∫∑t th√¥ng b√°o
                    </h2>
                    <p class="panel-subtitle">Qu·∫£n l√Ω c√°c lo·∫°i th√¥ng b√°o b·∫°n mu·ªën nh·∫≠n</p>

                    <div class="setting-card">
                        <div class="card-header">
                            <i class="fas fa-envelope"></i>
                            Th√¥ng b√°o qua Email
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Nh·∫Øc nh·ªü h√†ng ng√†y</div>
                                <div class="setting-desc">Nh·∫≠n email nh·∫Øc nh·ªü h·ªçc t·∫≠p m·ªói ng√†y</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="emailReminder" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Th√¥ng b√°o th√†nh t√≠ch</div>
                                <div class="setting-desc">Nh·∫≠n email khi ƒë·∫°t ƒë∆∞·ª£c th√†nh t√≠ch m·ªõi</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="achievementEmail" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">B√°o c√°o ti·∫øn ƒë·ªô tu·∫ßn</div>
                                <div class="setting-desc">Nh·∫≠n b√°o c√°o t·ªïng k·∫øt ti·∫øn ƒë·ªô h·ªçc t·∫≠p h√†ng tu·∫ßn</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="weeklyReport" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="setting-card">
                        <div class="card-header">
                            <i class="fas fa-mobile-alt"></i>
                            Th√¥ng b√°o ƒë·∫©y
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">B·∫≠t th√¥ng b√°o ƒë·∫©y</div>
                                <div class="setting-desc">Cho ph√©p nh·∫≠n th√¥ng b√°o ƒë·∫©y tr√™n thi·∫øt b·ªã</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="pushNotifications">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Th·ªùi gian nh·∫Øc nh·ªü</div>
                                <div class="setting-desc">Th·ªùi ƒëi·ªÉm b·∫°n mu·ªën nh·∫≠n nh·∫Øc nh·ªü h·ªçc t·∫≠p</div>
                            </div>
                            <div class="setting-control">
                                <select class="custom-select" id="reminderTime">
                                    <option value="morning">S√°ng (8:00)</option>
                                    <option value="afternoon">Chi·ªÅu (14:00)</option>
                                    <option value="evening" selected>T·ªëi (20:00)</option>
                                    <option value="custom">T√πy ch·ªânh</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Privacy Panel -->
                <div class="settings-panel" id="privacy-panel">
                    <h2 class="panel-title">
                        <i class="fas fa-shield-alt"></i>
                        B·∫£o m·∫≠t & Quy·ªÅn ri√™ng t∆∞
                    </h2>
                    <p class="panel-subtitle">Qu·∫£n l√Ω quy·ªÅn ri√™ng t∆∞ v√† b·∫£o m·∫≠t t√†i kho·∫£n c·ªßa b·∫°n</p>

                    <div class="setting-card">
                        <div class="card-header">
                            <i class="fas fa-user-lock"></i>
                            Quy·ªÅn ri√™ng t∆∞
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">H·ªì s∆° c√¥ng khai</div>
                                <div class="setting-desc">Cho ph√©p ng∆∞·ªùi d√πng kh√°c xem h·ªì s∆° c·ªßa b·∫°n</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="publicProfile">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Hi·ªÉn th·ªã ti·∫øn ƒë·ªô</div>
                                <div class="setting-desc">Cho ph√©p ng∆∞·ªùi kh√°c xem ti·∫øn ƒë·ªô h·ªçc t·∫≠p c·ªßa b·∫°n</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="showProgress">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Hi·ªÉn th·ªã th√†nh t√≠ch</div>
                                <div class="setting-desc">Chia s·∫ª c√°c th√†nh t√≠ch ƒë√£ ƒë·∫°t ƒë∆∞·ª£c v·ªõi ng∆∞·ªùi kh√°c</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="showAchievements" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="setting-card">
                        <div class="card-header">
                            <i class="fas fa-lock"></i>
                            B·∫£o m·∫≠t t√†i kho·∫£n
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">X√°c th·ª±c 2 l·ªõp (2FA)</div>
                                <div class="setting-desc">Th√™m l·ªõp b·∫£o m·∫≠t b·ªï sung cho t√†i kho·∫£n c·ªßa b·∫°n</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="twoFactorAuth">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Th√¥ng b√°o ƒëƒÉng nh·∫≠p</div>
                                <div class="setting-desc">Nh·∫≠n th√¥ng b√°o khi c√≥ ƒëƒÉng nh·∫≠p t·ª´ thi·∫øt b·ªã m·ªõi</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="loginNotification" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">ƒê·ªïi m·∫≠t kh·∫©u</div>
                                <div class="setting-desc">Thay ƒë·ªïi m·∫≠t kh·∫©u ƒëƒÉng nh·∫≠p c·ªßa b·∫°n</div>
                            </div>
                            <div class="setting-control">
                                <button class="btn-secondary-custom" onclick="window.location.href='/pages/dashboard/profile.html'">
                                    ƒê·ªïi m·∫≠t kh·∫©u
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="setting-card">
                        <div class="card-header">
                            <i class="fas fa-chart-bar"></i>
                            Thu th·∫≠p d·ªØ li·ªáu
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Ph√¢n t√≠ch s·ª≠ d·ª•ng</div>
                                <div class="setting-desc">Cho ph√©p thu th·∫≠p d·ªØ li·ªáu ƒë·ªÉ c·∫£i thi·ªán ·ª©ng d·ª•ng</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="analytics" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">C·∫£i thi·ªán tr·∫£i nghi·ªám</div>
                                <div class="setting-desc">Chia s·∫ª d·ªØ li·ªáu h·ªçc t·∫≠p ƒë·ªÉ c√° nh√¢n h√≥a n·ªôi dung</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="personalization" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Panel -->
                <div class="settings-panel" id="data-panel">
                    <h2 class="panel-title">
                        <i class="fas fa-database"></i>
                        Qu·∫£n l√Ω d·ªØ li·ªáu
                    </h2>
                    <p class="panel-subtitle">Sao l∆∞u, xu·∫•t v√† qu·∫£n l√Ω d·ªØ li·ªáu h·ªçc t·∫≠p c·ªßa b·∫°n</p>

                    <div class="setting-card">
                        <div class="card-header">
                            <i class="fas fa-cloud-upload-alt"></i>
                            Sao l∆∞u & ƒê·ªìng b·ªô
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Sao l∆∞u t·ª± ƒë·ªông</div>
                                <div class="setting-desc">T·ª± ƒë·ªông sao l∆∞u d·ªØ li·ªáu l√™n cloud h√†ng ng√†y</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="autoBackup" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">ƒê·ªìng b·ªô ƒëa thi·∫øt b·ªã</div>
                                <div class="setting-desc">ƒê·ªìng b·ªô ti·∫øn ƒë·ªô gi·ªØa c√°c thi·∫øt b·ªã c·ªßa b·∫°n</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="syncDevices" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">Sao l∆∞u th·ªß c√¥ng</div>
                                <div class="setting-desc">T·∫°o b·∫£n sao l∆∞u ngay b√¢y gi·ªù</div>
                            </div>
                            <div class="setting-control">
                                <button class="btn-secondary-custom" onclick="createBackup()">
                                    <i class="fas fa-save"></i> Sao l∆∞u ngay
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="setting-card">
                        <div class="card-header">
                            <i class="fas fa-download"></i>
                            Xu·∫•t d·ªØ li·ªáu
                        </div>

                        <div class="export-options">
                            <div class="export-card" onclick="exportData('json')">
                                <i class="fas fa-file-code"></i>
                                <h4>Xu·∫•t JSON</h4>
                                <p>ƒê·ªãnh d·∫°ng d·ªØ li·ªáu JSON</p>
                            </div>

                            <div class="export-card" onclick="exportData('csv')">
                                <i class="fas fa-file-csv"></i>
                                <h4>Xu·∫•t CSV</h4>
                                <p>ƒê·ªãnh d·∫°ng b·∫£ng t√≠nh</p>
                            </div>

                            <div class="export-card" onclick="exportData('pdf')">
                                <i class="fas fa-file-pdf"></i>
                                <h4>Xu·∫•t PDF</h4>
                                <p>B√°o c√°o h·ªçc t·∫≠p PDF</p>
                            </div>
                        </div>
                    </div>

                    <div class="danger-zone">
                        <div class="card-header">
                            <i class="fas fa-exclamation-triangle"></i>
                            V√πng nguy hi·ªÉm
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">X√≥a l·ªãch s·ª≠ h·ªçc t·∫≠p</div>
                                <div class="setting-desc">X√≥a to√†n b·ªô l·ªãch s·ª≠ h·ªçc t·∫≠p (kh√¥ng th·ªÉ ho√†n t√°c)</div>
                            </div>
                            <div class="setting-control">
                                <button class="btn-danger-custom" onclick="clearHistory()">
                                    <i class="fas fa-trash"></i> X√≥a l·ªãch s·ª≠
                                </button>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">ƒê·∫∑t l·∫°i ti·∫øn ƒë·ªô</div>
                                <div class="setting-desc">Reset to√†n b·ªô ti·∫øn ƒë·ªô h·ªçc t·∫≠p v·ªÅ ban ƒë·∫ßu</div>
                            </div>
                            <div class="setting-control">
                                <button class="btn-danger-custom" onclick="resetProgress()">
                                    <i class="fas fa-redo"></i> ƒê·∫∑t l·∫°i
                                </button>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">X√≥a t√†i kho·∫£n</div>
                                <div class="setting-desc">X√≥a vƒ©nh vi·ªÖn t√†i kho·∫£n v√† to√†n b·ªô d·ªØ li·ªáu</div>
                            </div>
                            <div class="setting-control">
                                <button class="btn-danger-custom" onclick="window.location.href='/pages/dashboard/profile.html#delete'">
                                    <i class="fas fa-user-times"></i> X√≥a t√†i kho·∫£n
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div id="footer-placeholder"></div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    
    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    
    <!-- Component Loader -->
    <script type="module" src="/js/utils/component-loader.js"></script>

    <!-- Settings Page Script -->
    <script>
        const API_URL = '/api';

        // Check authentication
        const token = localStorage.getItem('token');
        if (!token) {
            window.location.href = '/pages/auth/login.html';
        }

        // Default settings
        const defaultSettings = {
            // General
            language: 'vi',
            fontSize: 'medium',
            darkMode: false,
            autoTheme: false,
            soundEffects: true,
            effectsVolume: 75,
            animations: true,
            
            // Learning
            dailyGoal: 10,
            studyReminder: true,
            showPinyin: true,
            showZhuyin: false,
            reviewMode: 'quiz',
            autoPlay: true,
            
            // Notifications
            emailReminder: true,
            achievementEmail: true,
            weeklyReport: true,
            pushNotifications: false,
            reminderTime: 'evening',
            
            // Privacy
            publicProfile: false,
            showProgress: false,
            showAchievements: true,
            twoFactorAuth: false,
            loginNotification: true,
            analytics: true,
            personalization: true,
            
            // Data
            autoBackup: true,
            syncDevices: true
        };

        // Load settings from localStorage
        function loadSettings() {
            const savedSettings = localStorage.getItem('userSettings');
            if (savedSettings) {
                const settings = JSON.parse(savedSettings);
                applySettings(settings);
            } else {
                applySettings(defaultSettings);
            }
        }

        // Apply settings to UI
        function applySettings(settings) {
            Object.keys(settings).forEach(key => {
                const element = document.getElementById(key);
                if (!element) return;

                if (element.type === 'checkbox') {
                    element.checked = settings[key];
                } else if (element.type === 'range') {
                    element.value = settings[key];
                    updateRangeValue(key, settings[key]);
                } else {
                    element.value = settings[key];
                }
            });
        }

        // Save settings to localStorage
        function saveSettings() {
            const settings = {};
            
            // List of all saveable inputs
            const saveableInputs = [
                'language', 'fontSize', 'darkMode', 'autoTheme', 'soundEffects', 'effectsVolume', 'animations',
                'dailyGoal', 'studyReminder', 'showPinyin', 'showZhuyin', 'reviewMode', 'autoPlay',
                'emailReminder', 'achievementEmail', 'weeklyReport', 'pushNotifications', 'reminderTime',
                'publicProfile', 'showProgress', 'showAchievements', 'twoFactorAuth', 'loginNotification', 'analytics', 'personalization',
                'autoBackup', 'syncDevices'
            ];

            saveableInputs.forEach(id => {
                const element = document.getElementById(id);
                if (!element) return;

                if (element.type === 'checkbox') {
                    settings[id] = element.checked;
                } else if (element.type === 'range') {
                    settings[id] = parseInt(element.value);
                } else {
                    settings[id] = element.value;
                }
            });

            localStorage.setItem('userSettings', JSON.stringify(settings));
            showSuccessMessage();

            // In production, also save to server
            // saveToServer(settings);
        }

        // Show success message
        function showSuccessMessage() {
            const message = document.getElementById('successMessage');
            message.classList.add('show');
            setTimeout(() => {
                message.classList.remove('show');
            }, 3000);
        }

        // Update range slider value display
        function updateRangeValue(id, value) {
            const valueDisplay = document.getElementById(id + 'Value');
            if (valueDisplay) {
                if (id === 'dailyGoal') {
                    valueDisplay.textContent = value + ' t·ª´';
                } else {
                    valueDisplay.textContent = value;
                }
            }
        }

        // Panel switching
        function setupPanelSwitching() {
            const menuItems = document.querySelectorAll('.menu-item');
            const panels = document.querySelectorAll('.settings-panel');

            menuItems.forEach(item => {
                item.addEventListener('click', () => {
                    const panelId = item.dataset.panel + '-panel';

                    // Update active menu item
                    menuItems.forEach(mi => mi.classList.remove('active'));
                    item.classList.add('active');

                    // Update active panel
                    panels.forEach(panel => panel.classList.remove('active'));
                    document.getElementById(panelId).classList.add('active');

                    // Scroll to top
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });
        }

        // Setup auto-save on change
        function setupAutoSave() {
            const inputs = document.querySelectorAll('input, select');
            inputs.forEach(input => {
                input.addEventListener('change', () => {
                    saveSettings();
                });
            });

            // Range slider real-time update
            const rangeInputs = document.querySelectorAll('input[type="range"]');
            rangeInputs.forEach(input => {
                input.addEventListener('input', (e) => {
                    updateRangeValue(e.target.id, e.target.value);
                });
            });
        }

        // Export data functions
        function exportData(format) {
            const settings = JSON.parse(localStorage.getItem('userSettings') || '{}');
            const userData = {
                settings: settings,
                exportDate: new Date().toISOString(),
                version: '1.0'
            };

            if (format === 'json') {
                const dataStr = JSON.stringify(userData, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                downloadFile(dataBlob, 'settings-backup.json');
            } else if (format === 'csv') {
                let csvContent = 'Setting,Value\n';
                Object.entries(settings).forEach(([key, value]) => {
                    csvContent += `${key},${value}\n`;
                });
                const dataBlob = new Blob([csvContent], { type: 'text/csv' });
                downloadFile(dataBlob, 'settings-backup.csv');
            } else if (format === 'pdf') {
                alert('Xu·∫•t PDF s·∫Ω ƒë∆∞·ª£c tri·ªÉn khai trong phi√™n b·∫£n ti·∫øp theo');
            }

            showSuccessMessage();
        }

        // Download file helper
        function downloadFile(blob, filename) {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Backup function
        function createBackup() {
            exportData('json');
        }

        // Clear history
        function clearHistory() {
            if (confirm('‚ö†Ô∏è B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ h·ªçc t·∫≠p?\n\nH√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c!')) {
                if (confirm('X√°c nh·∫≠n l·∫ßn cu·ªëi: X√≥a t·∫•t c·∫£ l·ªãch s·ª≠ h·ªçc t·∫≠p?')) {
                    // In production, call API to clear history
                    alert('‚úÖ ƒê√£ x√≥a l·ªãch s·ª≠ h·ªçc t·∫≠p');
                    showSuccessMessage();
                }
            }
        }

        // Reset progress
        function resetProgress() {
            if (confirm('‚ö†Ô∏è B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ƒë·∫∑t l·∫°i to√†n b·ªô ti·∫øn ƒë·ªô h·ªçc t·∫≠p?\n\nT·∫•t c·∫£ t·ª´ v·ª±ng ƒë√£ h·ªçc, streak v√† ƒëi·ªÉm s·ªë s·∫Ω b·ªã reset v·ªÅ 0!')) {
                if (confirm('X√°c nh·∫≠n l·∫ßn cu·ªëi: ƒê·∫∑t l·∫°i to√†n b·ªô ti·∫øn ƒë·ªô?')) {
                    // In production, call API to reset progress
                    alert('‚úÖ ƒê√£ ƒë·∫∑t l·∫°i ti·∫øn ƒë·ªô h·ªçc t·∫≠p');
                    showSuccessMessage();
                }
            }
        }

        // Initialize
        function init() {
            loadSettings();
            setupPanelSwitching();
            setupAutoSave();
        }

        // Run on page load
        init();
    </script>
</body>
</html>
